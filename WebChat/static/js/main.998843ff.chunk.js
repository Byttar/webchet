(this.webpackJsonptelezap=this.webpackJsonptelezap||[]).push([[0],{29:function(e,t,a){e.exports=a(54)},34:function(e,t,a){},36:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(27),l=a.n(c),s=(a(34),a(13)),i=a.n(s),u=a(24),o=a(20),m=a(17),f=(a(36),a(7)),d=a.n(f);d.a.initializeApp({apiKey:"AIzaSyC01v5GHcSKKTHdRMfrHdJGcxlIZVUN2nk",authDomain:"trellinho.firebaseapp.com",databaseURL:"https://trellinho.firebaseio.com",projectId:"trellinho",storageBucket:"trellinho.appspot.com",messagingSenderId:"666173448044",appId:"1:666173448044:web:ec225fa0fca8b2dfce1d49",measurementId:"G-NXY3X0MJS6"});var E=d.a.database();a(48);var p=function(e){var t=e.author,a=e.content,c=e.id,l=e.time,s=e.active,i=e.edited,u=Object(n.useCallback)((function(e){!function(e){var t={};t["/Messages/"+e+"/active"]=0,d.a.database().ref().update(t)}(e)}),[]),o=Object(n.useCallback)((function(e){var t=prompt("Digite a nova mensagem");t&&function(e,t){var a={};a["/Messages/"+e+"/content"]=t,a["/Messages/"+e+"/edited"]=1,d.a.database().ref().update(a)}(e,t)}),[]),m=localStorage.getItem("user")!==t,f=new Date(l),E="".concat(f.getHours(),":").concat(f.getMinutes()<10?"0"+f.getMinutes():""+f.getMinutes());return r.a.createElement("div",{className:"Message"},r.a.createElement("div",{style:m?{marginRight:"auto",marginLeft:"0"}:{marginLeft:"auto"}},r.a.createElement("p",{className:"author"},t,r.a.createElement("small",null,i&&s&&"(editada)")),r.a.createElement("div",null,r.a.createElement("p",{className:"mensagem_content"},s?a:"Mensagem Excluida"),r.a.createElement("div",{className:"time"},E,localStorage.getItem("user")===t&&s?r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-pen-square",onClick:function(){return o(c)}}),r.a.createElement("i",{className:"fas fa-window-close",onClick:function(){return u(c)}})):""))))};var g=function(){var e=E.ref().child("Messages"),t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],s=Object(n.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l((function(e){return[].concat(Object(u.a)(e),[t])}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),f=Object(n.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(u.a)(c),n=c.findIndex((function(e){return e.key===t.key})),a[n]=t,l(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c]);return Object(n.useEffect)((function(){e.orderByChild("time").on("child_changed",(function(e){var t=Object.assign(e.val(),{key:e.key});f(t),console.log("changed")}))}),[f,e]),Object(n.useEffect)((function(){e.orderByChild("time").on("child_added",(function(e){var t=Object.assign(e.val(),{key:e.key});s(t)}))}),[s]),r.a.createElement("div",{className:"Chat"},r.a.createElement("div",{className:"Messages",ref:function(e){e&&(e.scrollTop=e.scrollHeight)}},c&&c.map((function(e){return r.a.createElement(p,{author:e.author,content:e.content,time:e.time,key:e.key,id:e.key,active:e.active,edited:e.edited})}))),r.a.createElement("form",{className:"SEND_MESSAGE",onSubmit:function(e){e.preventDefault();var t=d.a.database.ServerValue.TIMESTAMP;!function(e,t,a,n){var r={author:e,content:t,type:a,time:n,active:1},c={};c["/Messages/"+d.a.database().ref().child("Messages").push().key]=r,d.a.database().ref().update(c)}(localStorage.getItem("user"),e.currentTarget.MESSAGE.value,"text",t),e.currentTarget.MESSAGE.value=""}},r.a.createElement("input",{type:"text",name:"MESSAGE",required:!0}),r.a.createElement("button",null,r.a.createElement("i",{className:"fas fa-share"}))))},v=(a(49),a(3)),b=function(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"login"},a&&r.a.createElement(v.a,{to:{pathname:"/chat",state:{user:a}}}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.currentTarget.USERNAME.value;localStorage.setItem("user",t),c(t)}},r.a.createElement("h1",{style:{textAlign:"center"}},"WebChet"),r.a.createElement("label",null,r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{required:!0,name:"USERNAME",placeholder:"Digite Seu Nome"})),r.a.createElement("button",null,"Entrar")))},h=a(19);var S=function(){return r.a.createElement(h.a,null,r.a.createElement(v.d,null,r.a.createElement(v.b,{path:"/chat"},r.a.createElement(g,null)),r.a.createElement(v.b,{path:"/login"},localStorage.getItem("user")?r.a.createElement(v.a,{to:"/chat"}):r.a.createElement(b,null)),r.a.createElement(v.b,{path:"/"},r.a.createElement(v.a,{to:"/login"}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.998843ff.chunk.js.map